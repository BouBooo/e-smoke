{% extends 'base.html.twig' %}

{% block body %}

<div class="container">
{% if id is same as (app.user.id) %}
    <h1>Mon panier</h1>
    {% if panier is not empty %}
        <table class="table table-bordered" width="100%">
            <thead>
                <tr>
                    <th>Produit</th>
                    <th>Nom</th>
                    <th>Saveur</th>
                    <th>Catégorie</th>
                    <th>Marque</th>
                    <th>Prix (€)</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
        {% set count = 0 %}
        {% for liquid in panier %}
            {% set count = count + liquid.price %}
                <tr>    
                    <td width="20%"><img src="{{ vich_uploader_asset(liquid, 'imageFile') }}" style="width:50%;height:auto"/></td>
                    <td><a href="{{ path('show_liquid', { id : liquid.id }) }}">{{ liquid.name }}</a></td>
                    <td>{{ liquid.flavor }}</td>
                    <td>{{ liquid.category.name }}</td>
                    <td>{{ liquid.mark.name }}</td>
                    <td width="12%">{{ liquid.price }}.00 </td>
                    <td width="12%">  
                        <a href="{{ path('removeFromPanier', { id : liquid.id }) }}" class="btn btn-danger">Supprimer</a> 
                     </td>
                </tr>
        {% endfor %}
                <tr>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td><b>Total panier : </b></td>
                    <td><b>{{ count }}.00 €<b></td>
                    <td></td>
                </tr>

        </table>

        <div class="mb-4" style="float:right">
            <a href="#" class="btn btn-info">Finaliser ma commande</a>
        </div>
        <div class="mb-4" style="float:left">
            <a href="{{ path('clean_panier', { id : app.user.id }) }}" class="btn btn-danger">Vider mon panier</a>
        </div>
    {% else %}
    <div class="jumbotron mt-4">
        <p>Ce panier est vide.</p>
        <p>N'hésitez pas à consulter notre gamme de produits e-liquids <a href="{{ path('liquids') }}">ici </a></p>
    </div>
    {% endif %}

{% else %} 
    <div align="center" class="container mt-4">
        <a href="{{ path('home') }}" class="btn btn-primary"> Revenir au menu </a>
    </div>
{% endif %}
</div>
{% endblock %}
